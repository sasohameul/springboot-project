<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<th:block th:replace="~{./include/layout_admin :: setContent(~{:: .taskRegs})}">


<th:block class="taskRegs">
	
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

	<style>
	
	/* 공통사항 */
	.taskRegContainer {
		width: 1800px;
		
	}
	
	.taskRegBox {
	  width: 800px;
	  height: 750px;
	  text-align: center;
	  border: 1px solid #777;
	  box-shadow: 0 8px 10px #020f37;
	  margin: 30px 0;
	}

	.taskRegRow {
	  border-top: 1px solid rgb(227, 227, 227);
	  border-collapse: collapse;
	  line-height: 20px;
	}
	
	.taskRegRow:first-child {
		border-top: none;
	}
	
	.taskRegHeads, .tastRegBodies {
	  padding: 10px;
	  text-align: center;
	  font-size: large;
	  font-weight: bold;
	}
	
	.taskRegBodiesS {
	  padding: 10px;
	  text-align: center;
	  font-size: large;
	  font-weight: bold;
	  overflow: hidden;
	}
	
	.taskRegDates {
	  padding: 10px;
	  text-align: left;
	}
	
	
	.taskRegTable {
	  width: 700px;
	  height: 600px;
	  line-height: 90px;
	  border-bottom: 3px solid #020f37;
	  margin: 40px auto;
	}
	
	
	.colspanInput {
	  width: 98%;
	  block-size: 30px;
	}
	
	.taskRegInput {
	  width: 95%;
	  block-size: 30px;
	}
	
	.taskRegInputL {
		width: 98%;
		block-size: 30px;
	}
	
	.taskRegInputR {
		width:65%;
		block-size: 30px;
		float: left;
	}
	
	.datetimepicker {
	  width: 150px;
	  text-align: left;
	}
	
	.RegBtnBox {
	  margin: 20px;
	  text-align: center;
	}
	
	.saveBtn, .listBtn {
	  width: 100px;
	  height: 40px;
	  background-color: #020f37;
      color: #fff;
      font-weight: bold;
	}
	
	.taskRegBodiesS > .taskRegBtn {
	    background-color: #020f37;
	    color: #fff;
	   	width: 70px;
	   	height: 30px;
	   	font-weight: bold;
	   	float: right;
	   	font-size: 15px;
  	}
	  
	#startDateTime {
		block-size: 30px;
		margin-left: 10px;
		margin-right: 30px;
	}
	
	#endDateTime {
		block-size: 30px;
		margin-left: 10px;
	}
	
	.taskRegBodiesP {
		overflow: hidden;
	}
	
	.taskRegInputPL {
		float: left;
		display: inline-block;
		width: 480px;
	}
	
	.taskSearchPjtBtn {
		float: right;
		display: inline-block;
		width: 70px;
		background-color: #020f37;
		border: none;
		border-radius: none;
	    color: #fff;
	    font-weight: bold;
	    font-size: 15px;
	}
	
	</style>	
	
	<body>
	  <div class="taskRegContainer">
	    
      <h3>작업 등록</h3>
      	
      	<form name="taskForm" action="taskRegForm" method="post">
			  
		
	    <div class="taskRegBox">
		      <table class="taskRegTable">
				  
				  <tr class="taskRegRow">
					  <th class="taskRegHeads">프로젝트 선택</th>
					  <td colspan="3" class="taskRegBodiesP">
						  <!--모달창으로 반복 돌려서 프로젝트 리스트(프로젝트 ID)를 불러올 예정(고객사, 작업장소 자동으로 찍히고, 담당자 검색할 수 있게끔..)-->
						  <input type="text" class="taskRegInputPL">
						  <input type="button" class="pjtSearchBtn btn btn-primary" data-toggle="modal" data-target="#staticBackdrop" value="검색">
						  </input>
					  </td>
				  </tr>
				  		  
		          <tr class="taskRegRow">
		            <th class="taskRegHeads">고객사</th>
		            <td class="taskRegBodies"><input type="text" class="taskRegInputL"></td>
		          	<th class="taskRegHeads">담당자</th>
		            <td class="taskRegBodiesS">
						<input type="text" class="taskRegInputR">
						<input type="button" class="taskRegBtn" value="검색" style="line-height: initial;">
					</td>
				  </tr>
		          
		          <tr class="taskRegRow">
		            <th class="taskRegHeads">작업기간</th>
		            <td colspan="3" class="taskRegDates">
						
						시작일시 <input type="datetime-local" id="startDateTime" name="startDateTime" style="outline: none;">
						종료일시 <input type="datetime-local" id="endDateTime" name="endDateTime" style="outline: none;">
						
		            </td>
		          </tr>
		  
		  		  
		          <tr class="taskRegRow">
		            <th class="taskRegHeads">작업장소</th>
		            <td colspan="3" class="taskRegBodies"><input type="text" class="colspanInput"></td>
		          </tr>
		  
		          <tr class="taskRegRow">
		            <th class="taskRegHeads">작업명</th>
		            <td colspan="3" class="taskRegBodies"><input type="text" class="colspanInput"></td>
		          </tr>
		  
		          <tr class="taskRegRow">
		            <th class="taskRegHeads">작업내용</th>
		            <td colspan="3" class="taskRegBodies"><input type="text" class="colspanInput"></td>
		          </tr>
		    </div>
		    </table>
	
	    <!-- 버튼 기능 -->
	    <div class="RegBtnBox">
	      <input type="button" class="saveBtn" value="등록">
	      <input type="button" class="listBtn" value="목록">
	    </div>
		
		</form>
	
		<!--모달-->
		
		<form name="pjtsearchModal" action="pjtSearchForm" mothod="get">
			<div class="modal fade" id="staticBackdrop" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
			  <div class="modal-dialog">
			    <div class="modal-content">
			      <div class="modal-header">
			        <h5 class="modal-title" id="staticBackdropLabel">프로젝트 검색</h5>
			        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
			          <span aria-hidden="true">&times;</span>
			        </button>
			      </div>
			      <div class="modal-body">
			        
			        <table>
						<thead>
							<tr>
								<th>번호</th>
								<th>프로젝트ID</th>
								<th>프로젝트명</th>
								<th>고객사명</th>
								<th>담당자명</th>
								<th>선택</th>
							</tr>
						</thead>
						<tbody class="taskMoalBody">
							<tr th:each="vo, status : ${list}">
								<th>[[${status.count}]]</th>
								<td>[[${vo.pjt_id}]]</td>
								<td>[[${vo.pjt_nm}]]</td>
								<td>[[${vo.req_user_id}]]</td>
								<td>[[${vo.ins_user_id}]]</td>
								<td><input type="checkbox" style="display: block; text-align: center;" name="선택체크"></td>							
							</tr>
						</tbody>
					</table>
			        
			      </div>
			      <div class="modal-footer">
			        <button type="button" class="btn btn-secondary" data-dismiss="modal">닫기</button>
			        <button type="button" class="btn btn-primary">저장</button>
			      </div>
			    </div>
			  </div>
			</div>
		</form>
	
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>	
	
	  </div>
	  
	  	<!--datetimePicker-->
	<script>
		
		//시작일시
		const startDateTimeInput = document.getElementById("startDateTime");
		//종료일시
		const endDateTimeInput = document.getElementById("endDateTime");
		
		//현재일시
		function getCurrentDateTime() {
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, "0");
            const day = String(now.getDate()).padStart(2, "0");
            const hours = String(now.getHours()).padStart(2, "0");
            const minutes = String(now.getMinutes()).padStart(2, "0");

            return `${year}-${month}-${day}T${hours}:${minutes}`;
        }
		
		//시작일시 입력 필드의 최소값과 기본값 설정
		const currentDateTime = getCurrentDateTime();
        startDateTimeInput.min = currentDateTime;
        startDateTimeInput.value = currentDateTime;
		
		//종료일시 입력 필드의 최소값 설정
		startDateTimeInput.addEventListener("change", function () {
            endDateTimeInput.min = startDateTimeInput.value;
        });
			
	</script>

	<script>
		
		//프로젝트 검색

		
			
		//프로젝트 선택
		//const pjtSaveBtn = document.querySelector(".pjtSaveBtn");
		//pjtSaveBtn.addEventListener('click', function() {
			
			//document.taskForm.submit();
						
		//}) 
		
	</script>


</th:block>
	
</th:block>	