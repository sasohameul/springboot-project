<html xmlns:th="http://www.thymeleaf.org">


<!-- customer_news -->
<link rel="stylesheet" th:href="@{/css/customer_question.css}" />


<th:block th:replace="~{./include/layout_customer :: setContent(~{:: .wrap})}">
	<div class="wrap">
		<div class="col-lg-12 subtop_wrap">
			<div class="col-lg-8 subtop">
				<h1 class="page_header">Q & A
					<div class="sub_text">우리 서버에게 묻고 답하기</div>
				</h1>
			</div>
		</div>

		<div class="col-lg-8 q_list_wrap">
			<div class="search">
				
				<div class="total_num">
						총
					<span>[[${qpageVO.total}]]</span>
						건의 게시물 (
					<span>[[${qpageVO.page}]]</span> / 
					<th:block th:with="result=${T(java.lang.Math).ceil(qpageVO.total.doubleValue() / qpageVO.amount.doubleValue())}">
					<span th:text="${result.intValue()}"></span> pages )
					</th:block>
				</div>	
				<form name="" action="" method="get">
					<select name="searchType" style="font-size: 14px;" id="searchType">
						<option value="none" selected>선택</option>
						<option value="searchTitle" th:selected="${qpageVO.cri.searchType} == 'searchTitle'" >제목</option>
						<option value="searchContents" th:selected="${qpageVO.cri.searchType} == 'searchContents'" >내용</option>
					</select>
					<input name="searchKeyword" class="keyword" type="text" placeholder="검색할 키워드를 입력해주세요" th:value="${qpageVO.cri.searchKeyword}">
					<button class="search_btn">검색</button>
				</form>
				
				
			</div>
			<table class="q_list">
				<thead>
					<tr>
						<th>No.</th>
						<th>제목</thc>
						<th>작성자</th>
						<th>작성일</th>
						<th>파일</th>
						<th>조회수</th>
					</tr>
				</thead>
				<tbody>
					
					<tr th:each="vo,status :${list}">
					
					<td>[[${status.count}]]</td>
					<td class="title">
						<a th:href="@{customer_questionDetail(post_id=${vo.post_id})}">[[${vo.post_title}]] <img
								th:if="${vo.post_secret_yn} == 'Y'" th:src="@{/img/lock.png}"
								style="width:20px; height:20px; margin-left:3px;margin-bottom: 2px;"></a>
					</td>
					
					<td>[[${vo.user_id}]]</td>
					<td>[[${#temporals.format(vo.post_regdate, 'YYYY-MM-dd')}]]</td>
					<td><img th:if="${vo.file_id} != null" th:src="@{/img/file.png}" style="width: 20px; height: 20px;"></td>
					<td>[[${vo.post_hits}]]</td>
					<tr>
						<td colspan="6" th:if="${#lists.isEmpty(list)}">검색 결과가 없습니다.</td>
					</tr>
					</tr>
					
				</tbody>

			</table>
			
			<div class="goto_write">
				<a th:href="@{/question/customer_questionWrite}"><button class="goto_write_btn">글쓰기</button></a>
				
			</div>
			

			<th:block th:replace="~{./include/questionPage :: pageNation (${qpageVO})}"></th:block>
	</div>


<script th:inline="javascript">
	
	/* 등록 성공 시 */
	var msg = JSON.parse('[[${msg}]]');

		if (msg != null) {

			alert(msg);
		};
	
	/* 검색 */	
	$('.search_btn').click(function(){
		
		if($('#searchType').val() == 'none'){
			
			alert('검색 유형을 선택해주세요');

		} else if($('.keyword').val() == ''){
			
			alert('키워드를 입력해주세요');
			
		}
		
	})	
	
	
</script>

</th:block>

</html>